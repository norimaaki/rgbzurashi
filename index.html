<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>RGBずらし</title><style>body{font-family:'Helvetica',sans-serif;background-color:#f0f0f0;margin:0;display:flex;flex-direction:column;align-items:center;padding:20px;}input{margin-bottom:10px;padding:8px;font-size:16px;border:1px solid #ccc;border-radius:4px;}label{font-size:16px;font-weight:bold;margin-right:5px;}canvas{border:2px solid #333;max-width:100%;box-shadow:0 4px 8px rgba(0,0,0,0.1);}button{margin-top:10px;padding:10px;font-size:16px;background-color:#4CAF50;color:white;border:none;border-radius:4px;cursor:pointer;}button:hover{background-color:#45a049;}</style></head><body><input type="file" id="imageInput" accept="image/*" onchange="handleImage()"><label for="shiftAmount">Shift Amount:</label><input type="number" id="shiftAmount" value="50" onchange="handleShiftAmountChange()"><canvas id="imageCanvas"></canvas><button onclick="downloadImage()">Download Image</button><script>let shiftAmount=50;function handleImage(){const input=document.getElementById('imageInput');const canvas=document.getElementById('imageCanvas');const ctx=canvas.getContext('2d');const img=new Image();const file=input.files[0];const reader=new FileReader();reader.onload=function(e){img.onload=function(){const maxWidth=window.innerWidth;const ratio=maxWidth/img.width;const newWidth=maxWidth;const newHeight=img.height*ratio;canvas.width=newWidth;canvas.height=newHeight;ctx.drawImage(img,0,0,newWidth,newHeight);shiftRGB(ctx,newWidth,newHeight);};img.src=e.target.result;};reader.readAsDataURL(file);}function shiftRGB(context,width,height){const imageData=context.getImageData(0,0,width,height);const data=imageData.data;for(let i=0;i<data.length;i+=4){data[i]=data[i+shiftAmount*4]||0;data[i+4]=data[i+shiftAmount*4+4]||0;data[i+8]=data[i+shiftAmount*4+8]||0;}context.putImageData(imageData,0,0);}function handleShiftAmountChange(){shiftAmount=parseInt(document.getElementById('shiftAmount').value)||0;handleImage();}function downloadImage(){const canvas=document.getElementById('imageCanvas');const dataUrl=canvas.toDataURL('image/png');const a=document.createElement('a');a.href=dataUrl;a.download='converted.png';document.body.appendChild(a);a.click();document.body.removeChild(a);}</script></body></html>
